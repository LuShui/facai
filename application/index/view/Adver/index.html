<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="__PUBLIC__/layui/css/layui.css"></link>
  <style type="text/css">
    .layui-upload-img{
      width: 120px;
      height: 120px;
    }
    .layui-form-label{
      text-align: left;
    }
    .layui-upload{
      margin-left: 15px;
    }
  </style>
</head>
<body>
  <div style="height: 60px;"></div>
  <form class="layui-form" action="" enctype="multipart/form-data">
    
    <div class="layui-form-item">
      <label class="layui-form-label">广告描述</label>
      <div class="layui-input-block" style="width: 400px;">
        <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题" class="layui-input">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">广告链接</label>
      <div class="layui-input-block" style="width: 400px;">
        <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题" class="layui-input">
      </div>
    </div>

    <div class="layui-upload">
      <button type="button" class="layui-btn" id="ad_icon_1">上传ICON</button>
      <div class="layui-upload-list">
        <img class="layui-upload-img" id="ad_icon">
        <p id="demoText"></p>
      </div>
    </div>
    <div class="layui-upload">
      <button type="button" class="layui-btn" id="ad_banner_1">上传banner</button>
      <div class="layui-upload-list">
        <img class="layui-upload-img" id="ad_banner">
        <p id="demoText"></p>
      </div>
    </div>

  </form>
          
<script type="text/javascript" src="__PUBLIC__/layui/layui.js"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
layui.use(['upload'], function(){
  var $ = layui.jquery
  ,upload = layui.upload;


   //icon上传
  upload.render({
    elem: '#ad_icon_1'
    ,url: './uploadonefile'
    ,before: function(obj){
      //预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        // $('#ad_icon').attr('src', result); //图片链接（base64）
      });
    }
    ,done: function(res){
      //如果上传失败
      console.log(res);
      if(res.code > 0){
        return layer.msg('上传失败');
      }
      //上传成功
    }
  });

  // banner上传
  upload.render({
    elem: '#ad_banner_1'
    ,url: '/upload/'
    ,before: function(obj){
      //预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        $('#ad_banner').attr('src', result); //图片链接（base64）
      });
    }
    ,done: function(res){
      //如果上传失败
      if(res.code > 0){
        return layer.msg('上传失败');
      }
      //上传成功
    }
  });
  
  
  
});
</script>

</body>
</html>
